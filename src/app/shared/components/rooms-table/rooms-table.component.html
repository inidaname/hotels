<div class="row my-3">
  <!-- <div class="col-xl-3">
    <div class="card text-left">
      <img class="card-img-top" src="" alt="">
      <div class="card-body">
        <h4 class="card-title">Product Name almost finish/damage</h4>
        <p class="card-text">Descript, Category, Department and Price</p>
      </div>
    </div>
  </div> -->
  <ng-container *ngIf="purpose === 'product'; else guestLists">
  <div class="col-sm-12 card">
      <form class="p-3">
          <div class="form-group form-inline">
              Full text search: <input class="form-control ml-2" type="text" name="searchTerm" [(ngModel)]="service.searchTerm"/>
              <span class="ml-3" *ngIf="service.loading$ | async">Loading List of Products...</span>
          </div>

            <table class="table table-striped">
              <thead>
              <tr>
                <th scope="col">#</th>
                <th scope="col" sortable="roomTypeId.roomType" (sort)="onSort($event)">Room Type</th>
                <th scope="col" sortable="roomNumber" (sort)="onSort($event)">Room Number</th>
                <th scope="col" sortable="roomTypeId.roomPrice" (sort)="onSort($event)">Room Price</th>
                <th scope="col" sortable="roomStatus" (sort)="onSort($event)">Status</th>
              </tr>
              </thead>
              <tbody>
              <tr *ngFor="let room of rooms | async; let i = index;" (click)="clickMe(room)" [ngStyle]="{'cursor: pointer':  room.roomStatus === 'available'}" [ngClass]="{'text-muted': room.roomStatus === 'occupied' || room.roomStatus === 'reserved'}">
                <!-- <ng-container *ngIf="needed && room.roomStatus === 'available'"> -->
                <th scope="row">{{i.valueOf() + 1}}</th>
                <td><ngb-highlight [result]="room.roomTypeId.roomType| uppercase" [term]="service.searchTerm"></ngb-highlight></td>
                <td><ngb-highlight [result]="room.roomNumber" [term]="service.searchTerm"></ngb-highlight></td>
                <td><ngb-highlight [result]="room.roomTypeId.roomPrice | currency: 'NGN' : 'symbol-narrow'" [term]="service.searchTerm"></ngb-highlight></td>
                <td>
                  <ng-container *ngIf="needed">
                    <span [ngSwitch]="room.roomStatus">
                      <span class="badge badge-danger" *ngSwitchCase="'occupied'">Occupied</span>
                      <span class="badge badge-success" *ngSwitchCase="'available'">Available</span>
                      <span class="badge badge-warning" *ngSwitchCase="'reserved'">Reserved</span>
                    </span> &nbsp;
                  </ng-container>
                </td>
              <!-- </ng-container> -->
              </tr>
              </tbody>
            </table>

          <div class="d-flex justify-content-between p-2">
            <ngb-pagination
              [collectionSize]="total$ | async" [(page)]="service.page" [pageSize]="service.pageSize">
            </ngb-pagination>

            <select class="custom-select" style="width: auto" name="pageSize" [(ngModel)]="service.pageSize">
              <option [ngValue]="10">10 items per page</option>
              <option [ngValue]="50">50 items per page</option>
              <option [ngValue]="100">100 items per page</option>
            </select>
          </div>
        </form>
  </div>
  </ng-container>
  <ng-template #guestLists>
  <div class="col-sm-12 card">
      <form class="p-3">
          <div class="form-group form-inline">
              Full text search: <input class="form-control ml-2" type="text" name="searchTerm" [(ngModel)]="service.searchTerm"/>
              <span class="ml-3" *ngIf="service.loading$ | async">Loading List of Products...</span>
          </div>
          <ng-container *ngIf="rooms">

            <table class="table table-striped">
              <thead>
              <tr>
                <th scope="col">#</th>
                <th scope="col" sortable="checkedInStatus" (sort)="onSort($event)">Guest Status</th>
                <th scope="col" sortable="roomNumber" (sort)="onSort($event)">Room Number</th>
                <th scope="col" sortable="createdAt" (sort)="onSort($event)">Time Checked In</th>
                <th scope="col" sortable="amountPaid" (sort)="onSort($event)">Amount Paid</th>
                <th scope="col" sortable="room.roomTypeId.roomPrice" (sort)="onSort($event)">Room Price</th>
              </tr>
              </thead>
              <tbody>
              <tr *ngFor="let room of guests | async; let i = index;" (click)="clickMe(room)">
                <th scope="row">{{i.valueOf() + 1}}</th>
                <td><ngb-highlight [result]="(room.checkedInStatus === 'available') ? 'Checked Out' : (room.checkedInStatus === 'occupied') ? 'Checked In' : 'Reserved' | uppercase" [term]="service.searchTerm"></ngb-highlight></td>
                <td><ngb-highlight [result]="room.roomNumber" [term]="service.searchTerm"></ngb-highlight></td>
                <td><ngb-highlight [result]="room.createdAt | date: 'dd MMMM, hh:mm a'" [term]="service.searchTerm"></ngb-highlight></td>
                <td><ngb-highlight [result]="room.amountPaid | currency: 'NGN' : 'symbol-narrow'" [term]="service.searchTerm"></ngb-highlight></td>
                <td><ngb-highlight [result]="room.room?.roomTypeId.roomPrice | currency: 'NGN' : 'symbol-narrow'" [term]="service.searchTerm"></ngb-highlight></td>
              </tr>
              </tbody>
            </table>
          </ng-container>

          <div class="d-flex justify-content-between p-2">
            <ngb-pagination
              [collectionSize]="guestTotal$ | async" [(page)]="guestService.page" [pageSize]="guestService.pageSize">
            </ngb-pagination>

            <select class="custom-select" style="width: auto" name="pageSize" [(ngModel)]="guestService.pageSize">
              <option [ngValue]="10">10 items per page</option>
              <option [ngValue]="50">50 items per page</option>
              <option [ngValue]="100">100 items per page</option>
            </select>
          </div>
        </form>
  </div>

  </ng-template>
</div>
